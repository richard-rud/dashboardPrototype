<!DOCTYPE html>
<meta charset="utf-8">

<head>

<!-- JavaScript stylesheet -->

<script src="js/d3.v3.min.js" defer></script>
      
<script src="js/bootstrap.min.js" defer></script>

<!-- CSS stylesheets reference-->  

<link href="css/bootstrap.min.css" rel="stylesheet">

<link href="css/c3.css" rel="stylesheet" type="text/css">

<link rel="stylesheet" type="text/css" href="css/d3.parcoords.css">

<script src="js/d3.min.js" defer></script>


<!-- intro.js styles and script reference-->

<link href="css/introjs.css" rel="stylesheet">

<script type="text/javascript" src="js/intro.js"></script>

<style>



</style>

</head>

<body>

<!-- Displaying new stylesheet when the checkbox for the grid is choosen -->

<link id="pagestyle" rel="stylesheet" type="text/css" href="css/mainStyle.css">


<script>

function switchCSS1(){

if(checkboxGrid1.checked == true) {

document.getElementById('pagestyle').setAttribute('href', 'css/grid.css');

  }

else {
  document.getElementById('pagestyle').setAttribute('href', 'css/mainStyle.css');

}

}

function switchCSS2(){

if(checkboxGrid2.checked == true) {

document.getElementById('pagestyle').setAttribute('href', 'css/grid.css');

  }

else {
  document.getElementById('pagestyle').setAttribute('href', 'css/mainStyle.css');

}

}

</script>

<div id="navBar">

<a href="javascript:void(0);" onclick="javascript:introJs().setOption('showProgress', true).start();"><button data-position="right"
 class="btn btn-primary" type="button"><span class="glyphicon glyphicon-info-sign"></span>
  Show me how
</button></a>

<a href="storyline/storyline.html"><button class="btn btn-primary" type="button"><span class="glyphicon glyphicon-book"></span>
  Background information
</button></a>

<a href="credits.html"><button class="btn btn-primary" type="button"><span class="glyphicon glyphicon-heart"></span>
  Acknowledgments
</button></a>

<a href="http://en.wikipedia.org/wiki/Material_flow_analysis"><button class="btn btn-primary" type="button"><span class="glyphicon glyphicon-search"></span>
  What is Material Flow Analysis
</button></a>

<a href="http://www.ntnu.edu/indecol"><button class="btn btn-primary" type="button"></span>
  NTNU’s Industrial Ecology Programme
</button></a>

</div>


<div id="mainContent">

<p>
<a style="margin:3em;color:#000000;font-style:italic;" href="https://github.com/mbostock/d3/wiki"> *If you're using IE, you may experience some problems due to lack of D3 support</a>
</p>

<div data-step="1" data-intro="Welcome to the Norwegian food waste dashboard! This is a quick tutorial of how to use the application."></div>

<!-- Phosphorus flow diagram -->

<div class="panel-group" id="accordion1" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="tabOne">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="false" aria-controls="collapseOne" data-step="2" data-intro="This diagram displays the phosphorus layer. You can hover over the flows with the mouse pointer for more detailed information. The default diagram displays the baseline scenario for phosphorus using historical data, 2009-2011 avg. By pressing the green buttons you can switch between different scenarios. Additionally, you can collapse/uncollapse different diagram windows, making it possible for you to mix and match which diagrams to display." data-position="right">
          Phosphorus flow diagram:             
        </a>          

          <div id="scenarioLabel_P"><div>

      </h4>
    </div>
    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="tabOne">
      <div class="panel-body">

        <p>
        The flow diagram below is a presentation of the Norwegian food production and consumption system representing the imports and deposition (purple), losses and exports (red), domestic supply (green) and recycling (blue) flows of phosphorus (P). The grey vertical lines are processes in the system. The system includes plant production, animal husbandry, food processing, human consumption, waste management and biogas production. For more information about phosphorus visit <a href="http://www.unep.org/yearbook/2011/pdfs/phosphorus_and_food_productioin.pdf">UNEP</a>.
        </p>

      

       

        <hr>


        <button data-step="3" data-intro="You can press the different buttons to run different scenarios for phosphorus. Pressing this button gives you the recycling scenario for phosphorus." data-position="right" id="s1_p" class="btn btn-success" type="button"><span class="glyphicon glyphicon-floppy-open"></span>Recycling (P)</button>

        <button data-step="4" data-intro="Pressing this button gives you the food waste prevention scenario for phosphorus." data-position="right" id="s2_p" class="btn btn-success" type="button"><span class="glyphicon glyphicon-floppy-open"></span>Food waste prevention (P)</button>

        <button data-step="5" data-intro="Pressing this button gives you the baseline scenario for phosphorus. This scenario uses historical data, 2009-2011 avg." data-position="right" id="baseline_P" class="btn btn-success" type="button"><span class="glyphicon glyphicon-floppy-open"></span>Baseline scenario (P)</button>

        <button onclick="helpPhosphorusFlowDiagram()" class="btn btn-info" type="button"><span class="glyphicon glyphicon-info-sign"></span> How do I use it?</button>

        <input style="margin:10px;" id="checkboxGrid1" type="checkbox" name="checkboxGrid1" value="selectGrid" onchange="switchCSS1('css/grid.css')"><b>Gridlines</b></input>

          <div class='my-legend' id="legend_P">
            <div class='legend-scale'>
              <ul class='legend-labels'>
                <li><span style='background:#238b45;'></span>Domestic supply</li>
                <li><span style='background:#807dba;'></span>Import and deposition</li>
                <li><span style='background:#cb181d;'></span>Losses and exports</li>
                <li><span style='background:#2171b5;'></span>Domestic recycling</li>
              </ul>
            </div>
          </div>

            <div class="horizontalGrid">

            <div id="sankeyContent_P"></div>

            </div>

        </div>
               
      </div>
    </div>

  </div>

  <!-- Energy flow diagram -->

  <div class="panel-group" id="accordion2" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="tabTwo">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo" data-step="6" data-intro="This window displays the energy layer. You can hover over the flow with the mouse pointer for more detailed information. The default diagram displays the baseline scenario for energy using historical data, 2009-2011 avg." data-position="right">
          Energy flow diagram:
        </a>

          <div id="scenarioLabel_E"><div>

      </h4>
    </div>
    <div id="collapseTwo" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="tabTwo">
      <div class="panel-body">

        <p>
          The flow diagram below is a presentation of the Norwegian food production and consumption system representing the imports and process energy (PE) (purple), losses and exports (red), domestic supply (yellow) and recycling (blue) flows of energy. The grey vertical lines are processes in the system. The system includes plant production, animal husbandry, food processing, human consumption, waste management and biogas production. For more information about energy visit <a href="http://www.unep.org/climatechange/mitigation/Energy/tabid/104339/Default.aspx">UNEP</a>.
        </p>

        <button data-step="7" data-intro="You can press the different buttons to run different scenarios for energy. Pressing this button gives you the food waste recycling scenario for energy." data-position="right" id="s1_E" class="btn btn-warning" type="button" ></span>Recycling (E)</button>

        <button data-step="8" data-intro="Pressing this button gives you the food waste prevention scenario for energy." data-position="right" id="s2_E" class="btn btn-warning" type="button"><span class="glyphicon glyphicon-floppy-open"></span>Food waste prevention (E)</button>

        <button data-step="9" data-intro="Pressing this button gives you the baseline scenario for energy. This scenario uses historical data, 2009-2010 avg." data-position="right" id="baseline_E" class="btn btn-warning" type="button"><span class="glyphicon glyphicon-floppy-open"></span>Baseline scenario (E)</button>

        <button onclick="helpEnergyFlowDiagram()" class="btn btn-info" type="button"><span class="glyphicon glyphicon-info-sign"></span> How do I use it?</button>

        <input style="margin:15px;" id="checkboxGrid2" type="checkbox" name="checkboxGrid2" value="selectGrid" onchange="switchCSS2('css/grid.css')"><b>Gridlines</b></input>


          <div class='my-legend' id="legend_E">
            <div class='legend-scale'>
              <ul class='legend-labels'>
                <li><span style='background:#ec971f');></span>Domestic supply</li>
                <li><span style='background:#807dba;'></span>Imports and PE</li>
                <li><span style='background:#cb181d;'></span>Losses and exports</li>
                <li><span style='background:#2171b5;'></span>Domestic recycling</li>
              </ul>
            </div>
          </div>  

          <div class="horizontalGrid">

              <div id="sankeyContent_E"></div>

          </div>

        </div>
               
      </div>
    </div>

  </div>

<!-- Scenario comparison charts -->

<div class="panel-group" id="accordion3" role="tablist" aria-multiselectable="true">

    <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="tabThree">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="false" aria-controls="collapseThree" data-step="10" data-intro="By pressing and opening up this tab, you will be able to compare different scenarios and different flows more directly. Hover over the different collections of bar charts to see more detailed information for each separate flow. You can unselect/select which scenarios to show in the bottom of both the energy and phosphorus bar chart collection." data-position="right">
          Scenario comparison
        </a>
      </h4>
    </div>
    <div id="collapseThree" class="panel-collapse collapsing" role="tabpanel" aria-labelledby="tabThree">
      
      <div class="panel-body">

        <p>
        The diagram below compares the effect of different scenarios distributed among the different flows. Each flow is presented as a cluster of three bars quantifying the effect of the baseline, recycling and food waste prevention scenario.
        </p>

        <button onclick="helpScenarioComparisonFlowDiagram()" class="btn btn-info" type="button"><span class="glyphicon glyphicon-info-sign"></span> How do I use it?</button>
        
        <hr>

       <div id="containerBar">

          <script src="js/d3.v3.min.js" charset="utf-8" defer></script>

          <script src="js/c3.js" defer></script>

          <!-- Following script renders the barChart of flows, principle- seperation of the logic-->
          <script type="text/javascript" src="js/flowsBarChartDashboard.js" defer></script>

              <p class="col-md-6"><b>Phosphorus: </b></p>
              <p class="col-md-6"><b>Energy: </b></p>
         
            <div id="barChartPhosphorus" class="col-md-6"></div>           

            <div id="barChartEnergy" class="col-md-6"></div>   

        </div>
               
      </div>

    </div>

  </div>
  
</div>

<!-- Problem shifting (Parallel coordinates chart) -->

<div class="panel-group" id="accordion4" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="tabFour">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="false" aria-controls="collapseFour" data-step="11" data-intro="By pressing and opening up this tab, you will be able to look at problems shifting more directly. You can hover over the table in the bottom of the chart to more clearly see the variation between scenarios and the different parameters. It is also possible to use a brush on each axis, e.g. if you want to set a limit to the values displayed or select a combination of parameters to show." data-position="right">
          Problem shifting
        </a>
      </h4>
    </div>
    <div id="collapseFour" class="panel-collapse collapsing" role="tabpanel" aria-labelledby="tabFour">
      <div class="panel-body">
              
        <div id="psContainer">

          <p>The parallel coordinates plot presents a few of the most relevant indicators for both phosphorus and energy distributed among the various scenarios. You can hover the attached table to separate scenarios. There is also a brush function for specifying the value range of the various y-axes. By double-clicking the axis name you can switch between representing values in an ascending or descending order. PE = Process Energy, P = Phosphorus, kton = kiloton</p>

          <button onclick="helpProblemShiftingFlowDiagram()" class="btn btn-info" type="button"><span class="glyphicon glyphicon-info-sign"></span> How do I use it?</button>

          <hr>

          <div id="problemShifting" class="parcoords" style="height:400px;"></div>

          <div id="grid"></div>      

          <script type="text/javascript" src="js/problemShifting.js" defer></script> 

        </div>
               
      </div>
    </div>

  </div>

</div>

   <!-- The Norwegian Food Waste system quantified -->

  <div class="panel-group" id="accordion5" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="tabFice">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="false" aria-controls="collapseFive" data-step="12" data-intro="This diagram makes it possible for you to look at imports, exports, domestic production and avoidable food waste for the baseline scenario (2009 - 2011 avg) as kiloton of dry matter per year. " data-position="right">
          The Norwegian food production and consumption system quantified
        </a>
      </h4>
    </div>
    <div id="collapseFive" class="panel-collapse collapsing" role="tabpanel" aria-labelledby="tabFive">
      <div class="panel-body">
              
      <p>
        This diagram makes it possible for you to look at imports, exports, domestic production and avoidable food waste for the baseline scenario (2009 - 2011 avg) as kiloton of dry matter per year. MBI = mass balance inconsistency. 
      </p>

      <button onclick="helpSystemQuantified()" class="btn btn-info" type="button"><span class="glyphicon glyphicon-info-sign"></span> How do I use it?</button>

      <hr>

      <div id="nfws"></div>

      <script type="text/javascript" src="js/nfws.js" defer></script>


        </div>
               
      </div>
    </div>

  </div>

<!-- Avoidable food waste stacked bar chart -->

  <div class="panel-group" id="accordion6" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="tabSix">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="false" aria-controls="collapseSix" data-step="13" data-intro="This diagram makes it possible for you to look at avoidable food waste for the baseline scenario (2009 - 2011 avg.) as kiloton of dry matter per year. Select/unselect what bars to display, pressing the categories in the legend. Hover over the bars for detailed information." data-position="right">
          Avoidable food waste 
        </a>
      </h4>
    </div>
    <div id="collapseSix" class="panel-collapse collapsing" role="tabpanel" aria-labelledby="tabSix">
      <div class="panel-body">
              
        <p>
        This diagram makes it possible for you to look at avoidable food waste for the baseline scenario (2009 - 2011 avg.) as kiloton of dry matter per year. Select/unselect what bars to display, pressing the categories in the legend. Hover over the bars for detailed information. Avoidable food waste is defined as “all edible food that should have been eaten but due to different reasons cannot be sold or utilized, both before it is discarded and ends up as waste and when it has become waste.”  (Hanssen et al. 2013). 
        </p>

        <button onclick="helpAFW()" class="btn btn-info" type="button"><span class="glyphicon glyphicon-info-sign"></span> How do I use it?</button>

      <hr>

      <div id="avoidableFoodWasteContainer">

      <script src="js/avoidableFoodWaste.js" defer></script>

      <div id="stackedBar"></div> 

      </div> 

        </div>
               
      </div>
    </div>

  </div>

  <!-- AFW vs. tot FW chart -->

  <div class="panel-group" id="accordion7" role="tablist" aria-multiselectable="true">
  <div class="panel panel-default">
    <div class="panel-heading" role="tab" id="tabSeven">
      <h4 class="panel-title">
        <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapseSeven" aria-expanded="false" aria-controls="collapseSeven" data-step="14" data-intro="By pressing and opening up this tab, you will get a comparison of the relative importance of food waste recycling for energy purposes versus food waste prevention for phosphorus related issues." data-position="right">
          Recycling versus prevention
        </a>
      </h4>
    </div>
    <div id="collapseSeven" class="panel-collapse collapsing" role="tabpanel" aria-labelledby="tabSeven">
      <div class="panel-body">
              
      <p>
        This diagram tries to compare the relative importance of food waste recycling for energy purposes versus food waste prevention for phosphorus related issues. 
      <br>
     
        The energy perspective presents the energy demand in the transportation sector for 2010 (Ministry of Petroleum and Energy 2013). The data uses energy demand in transportation due to the fact that biogas is identified as a potential displacement for fossil fuels. 
      <br>
        The phosphorus perspective use tha avg. data from 2009-2011 (Hamilton et al. 2015) compared with potential reduction when preventing food waste (scenario 2: food waste prevention) 
      </p>

      <button onclick="helpRecyclingVersusPrevention()" class="btn btn-info" type="button"><span class="glyphicon glyphicon-info-sign"></span> How do I use it?</button>

       <hr>
      
      <div id="comparison1" class="col-md-6"></div>

      <div id="comparison2" class="col-md-6"></div>

      <script type="text/javascript" src="js/comparisonPolicyEffects.js" defer></script>

        </div>
               
      </div>
    </div>

  </div>

</div> <!-- Breaking off the main content -->

<script type="text/javascript" src="js/d3.tip.js" defer></script>

<script type="text/javascript" src="js/FW_sankey_P.js" defer></script>

<script type="text/javascript" src="js/FW_sankey_E.js" defer></script>


    <script src="js/jquery.js">

    $('.collapse').collapse()

    </script>

    <!-- Help buttons below-->

     <script>

       // \n\n means linebreak

        //Help functionality
            
            function helpPhosphorusFlowDiagram() {
                
                alert('This diagram displays the phosphorus layer. You can hover over the flows with the mouse pointer for more detailed information. \n\nThe default diagram displays the baseline scenario for phosphorus using historical data, 2009-2011 avg. By pressing the green buttons you can switch between different scenarios.\n\nIf you want to know more about this application, please press the "Show me how" button for a walkthrough of the functionality in this application.');
              }

            function helpEnergyFlowDiagram() {
                
                alert('This diagram displays the energy layer. You can hover over the flows with the mouse pointer for more detailed information. \n\nThe default diagram displays the baseline scenario for energy using historical data, 2009-2011 avg. By pressing the yellow buttons you can switch between different scenarios.\n\nIf you want to know more about this application, please press the "Show me how" button for a walkthrough of the functionality in this application.');
            }

            function helpScenarioComparisonFlowDiagram() {
                
                alert('This diagram makes it possible for you to compare different scenarios and different flows more directly. \n\nHover over the different clusters of bars to see more detailed information for each separate flow. \n\nYou can unselect/select which scenarios to show in the bottom of both the energy and phosphorus bar chart by clicking the legend or hovering over the categories in the legend to highlight a specific scenario.');
            }

            function helpProblemShiftingFlowDiagram() {
                
                alert('This diagram makes it possible for you to look at tradeoffs between phosphorus and energy comparing different scenarios. \n\nYou can hover over the table in the bottom of the chart to highlight the tradeoffs for a specific scenario. \n\nIn addition, there is a brush function available on each axis so that you can set a maximum or minimum value limit. \n\nYou can also rearrange the scale on each axis by double clicking the label name on top (currently only working in Safari, Opera and Chrome).');
            }

            function helpSystemQuantified() {
                
                alert('You can select/ unselect which categories to display by pressing the categories in the legend. \n\nBy clicking the legend or hovering over the categories in the legend you can highlight a specific scenario');
            }

            function helpAFW() {
                
                alert('You can select/ unselect which categories to display by pressing the categories in the legend. By clicking the legend or hovering over the categories in the legend you can highlight a specific scenario');
            }

            function helpRecyclingVersusPrevention() {
                
                alert("You can select/ unselect which categories to display by pressing the categories in the legend. By clicking the legend or hovering over the categories in the legend you can highlight a specific scenario");
            }

        </script>
        
    
</body>


   